Logically to me, the next thing we should create is the Conversation Template. Why? Well, this is where you'll layout everything that your character says to the player as well as all the possible responses the player can make. There's no point in coding logic, before you've figured out how the conversation will play out! <!-- s:) --><img src="{SMILIES_PATH}/icon_e_smile.gif" alt=":)" title="Smile" /><!-- s:) -->Go ahead and navigate on your server to workspace/Core3/MMOCoreORB/bin/scripts/mobile/conversations/tasks/and create a new file called merch_crazy_larry_conv.lua Copy and paste the following conversation code in to the file,[code:imqel3lb]crazylarry_template = ConvoTemplate&#58;new {initialScreen = &quot;first_screen&quot;,templateType = &quot;Lua&quot;,luaClassHandler = &quot;crazylarry_convo_handler&quot;,screens = {}}crazylarry_first_screen = ConvoScreen&#58;new {id = &quot;first_screen&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Welcome to Crazy Larry's Luxury Landspeeders! Would you like to buy a vehicle?&quot;,stopConversation = &quot;false&quot;,options = {{&quot;Speederbike - 10,000&quot;, &quot;speederbike&quot;},{&quot;No thank you&#46;&quot;, &quot;deny_quest&quot;},}}crazylarry_template&#58;addScreen(crazylarry_first_screen);crazylarry_accept_quest = ConvoScreen&#58;new {id = &quot;speederbike&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Enjoy that Speederbike!&quot;,stopConversation = &quot;true&quot;,options = {}}crazylarry_template&#58;addScreen(crazylarry_accept_quest);crazylarry_deny_quest = ConvoScreen&#58;new {id = &quot;deny_quest&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Well, ya'll have a nice day&#46; Ya hear!&quot;,stopConversation = &quot;true&quot;,options = {}}crazylarry_template&#58;addScreen(crazylarry_deny_quest);crazylarry_insufficient_funds = ConvoScreen&#58;new {id = &quot;insufficient_funds&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Sorry, but you don't have enough credits with you to purchase that&#46; Head on over to the bank&#46; I'll be here when ya get back!&quot;,stopConversation = &quot;true&quot;,options = {}}crazylarry_template&#58;addScreen(crazylarry_insufficient_funds);crazylarry_insufficient_space = ConvoScreen&#58;new {id = &quot;insufficient_space&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Sorry, but you don't have enough space in your inventory to accept the item&#46; Please make some space and try again&#46;&quot;,stopConversation = &quot;true&quot;,options = {}}crazylarry_template&#58;addScreen(crazylarry_insufficient_space);addConversationTemplate(&quot;crazylarry_template&quot;, crazylarry_template);[/code:imqel3lb]Here is what all that stuff means. [code:imqel3lb]crazylarry_template = ConvoTemplate&#58;new {initialScreen = &quot;first_screen&quot;,templateType = &quot;Lua&quot;,luaClassHandler = &quot;crazylarry_convo_handler&quot;,screens = {}}[/code:imqel3lb]This defines conversation, sets the type conversation it is, and gives it a class name so it can be actioned upon by a screenplay. The first part of the name given to the luaClassHandler must match the first part of the name of the conversation itself, as you can see there. initialScreen tells the engine where to start the conversation when a player engages the character. [code:imqel3lb]crazylarry_first_screen = ConvoScreen&#58;new {id = &quot;first_screen&quot;,leftDialog = &quot;&quot;,customDialogText = &quot;Welcome to Crazy Larry's Luxury Landspeeders! Would you like to buy a vehicle?&quot;,stopConversation = &quot;false&quot;,options = {{&quot;Speederbike - 10,000&quot;, &quot;speederbike&quot;},{&quot;No thank you&#46;&quot;, &quot;deny_quest&quot;},}}crazylarry_template&#58;addScreen(crazylarry_first_screen);[/code:imqel3lb]This is the basic template that is used for all conversation interactions. The rest of the ones in this file are the same layout, just with different names and values. The things to keep in mind here are that the first line defines the name of this conversation screen and the last line registers that name for use by the engine, so the names all have to match up. It's pretty easy to forget to change them all when copying and pasting an existing screen to use a template for a new screen, so double check them. [b:imqel3lb]id = &quot;first_screen&quot;,[/b:imqel3lb]This is the unique name for this screen. It will be used in your logic to play this part of the conversation.[b:imqel3lb]leftDialog = &quot;&quot;,[/b:imqel3lb]This is used to pull existing dialog from a datatable in the TRE files. We're not using it as we are creating a completely new character from scratch.[b:imqel3lb]customDialogText = &quot;Welcome to Crazy Larry's Luxury Landspeeders! Would you like to buy a vehicle?&quot;,[/b:imqel3lb]And here is the custom dialog that will be displayed on the left of the NPC when he speaks.[b:imqel3lb]stopConversation = &quot;false&quot;,[/b:imqel3lb]When this is &quot;false&quot;, the conversation window stays open and allows the player to select an option. If there aren't any options defined, the player will still see the &quot;End Conversation&quot; option. When this option is set to &quot;true&quot;, the conversation closes and anything the NPC says in this screen is simply printed to the spatial chat box. Setting this &quot;true&quot; is pretty much a way to say &quot;good bye&quot;.[b:imqel3lb]options = {{&quot;Speederbike - 10,000&quot;, &quot;speederbike&quot;},{&quot;No thank you.&quot;, &quot;deny_quest&quot;},}[/b:imqel3lb]These are the options (on the right of the NPC) that the player can choose to reply to what the NPC has said. In this case, there are two options, one per line. The first set of quotes is the text that the player will read, while second set of quotes is the unique name given to option the player can choose. That unique name (also called a variable) will be used in your screenplay to take actions based upon the player's choices. It's a good rule of thumb to name these variables something that clearly or obviously describes their function. [b:imqel3lb]addConversationTemplate(&quot;crazylarry_template&quot;, crazylarry_template);[/b:imqel3lb]This is the final line of the file that registers the conversation so that the engine can use it. Alrighty, that covers how to make a conversation template and what all the parts mean, for our purposes. I would suggest that if you are going about creating a brand new conversation you should create a flow chart with all the dialog and links before you start writing any of the above code. It's easy to mess things up if you're not really sure what order you'd like things to work in.
